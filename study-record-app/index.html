<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›½å®¶è©¦é¨“å¯¾ç­– å­¦ç¿’è¨˜éŒ²</title>
    <meta name="description" content="3å¹´ç”Ÿå›½å®¶è©¦é¨“å¯¾ç­–ã®å­¦ç¿’é€²æ—ã‚’è¨˜éŒ²ãƒ»å¯è¦–åŒ–ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA_yLVKacdFu23fkv3uzEsmgsZfwSjivhw",
            authDomain: "kokushi-study-record.firebaseapp.com",
            projectId: "kokushi-study-record",
            storageBucket: "kokushi-study-record.firebasestorage.app",
            messagingSenderId: "1064513402081",
            appId: "1:1064513402081:web:77e5cc63a0925800b573a0"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ“š å›½å®¶è©¦é¨“å¯¾ç­– å­¦ç¿’è¨˜éŒ²</h1>
        </header>

        <!-- ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
        <section id="auth-section" class="card">
            <!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ -->
            <div class="auth-tabs">
                <button id="tab-login" class="auth-tab active">ãƒ­ã‚°ã‚¤ãƒ³</button>
                <button id="tab-register" class="auth-tab">æ–°è¦ç™»éŒ²</button>
            </div>

            <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  -->
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-student-id">å­¦ç±ç•ªå·</label>
                    <input type="text" id="login-student-id" placeholder="ä¾‹: P22001" required>
                </div>
                <div class="form-group">
                    <label for="login-password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="login-password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" required>
                </div>
                <button type="submit" class="btn btn-primary">ãƒ­ã‚°ã‚¤ãƒ³</button>
            </form>

            <!-- ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
            <form id="registration-form" class="auth-form hidden">
                <div class="form-group">
                    <label for="student-id">å­¦ç±ç•ªå·</label>
                    <input type="text" id="student-id" placeholder="ä¾‹: P22001" required>
                </div>
                <div class="form-group">
                    <label for="student-name">æ°å</label>
                    <input type="text" id="student-name" placeholder="ä¾‹: å±±ç”° å¤ªéƒ" required>
                </div>
                <div class="form-group">
                    <label for="student-password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="student-password" placeholder="4æ–‡å­—ä»¥ä¸Š" required minlength="4">
                </div>
                <div class="form-group">
                    <label for="student-password-confirm">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰</label>
                    <input type="password" id="student-password-confirm" placeholder="ã‚‚ã†ä¸€åº¦å…¥åŠ›" required minlength="4">
                </div>
                <button type="submit" class="btn btn-primary">ç™»éŒ²ã—ã¦é–‹å§‹</button>
            </form>
        </section>

        <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ (ç™»éŒ²å¾Œã«è¡¨ç¤º) -->
        <section id="main-section" class="hidden">
            <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± -->
            <div class="user-info card">
                <span id="display-user-info"></span>
                <button id="logout-btn" class="btn btn-secondary btn-small">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>

            <!-- è¨˜éŒ²å…¥åŠ› -->
            <div class="card">
                <h2>âœï¸ å­¦ç¿’è¨˜éŒ²ã‚’å…¥åŠ›</h2>
                <form id="record-form">
                    <div class="form-group">
                        <label for="field-select">åˆ†é‡</label>
                        <select id="field-select" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="è§£å‰–å­¦">è§£å‰–å­¦</option>
                            <option value="ç”Ÿç†å­¦">ç”Ÿç†å­¦</option>
                            <option value="é‹å‹•å­¦">é‹å‹•å­¦</option>
                            <option value="ç—…ç†å­¦">ç—…ç†å­¦</option>
                            <option value="è‡¨åºŠåŒ»å­¦">è‡¨åºŠåŒ»å­¦</option>
                            <option value="ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åŒ»å­¦">ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åŒ»å­¦</option>
                            <option value="ç†å­¦ç™‚æ³•è©•ä¾¡å­¦">ç†å­¦ç™‚æ³•è©•ä¾¡å­¦</option>
                            <option value="ç†å­¦ç™‚æ³•æ²»ç™‚å­¦">ç†å­¦ç™‚æ³•æ²»ç™‚å­¦</option>
                            <option value="åœ°åŸŸç†å­¦ç™‚æ³•å­¦">åœ°åŸŸç†å­¦ç™‚æ³•å­¦</option>
                            <option value="ãã®ä»–">ãã®ä»–</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questions-attempted">è§£ã„ãŸå•é¡Œæ•°</label>
                            <input type="number" id="questions-attempted" min="0" max="200" required>
                        </div>
                        <div class="form-group">
                            <label for="questions-correct">æ­£ç­”æ•°</label>
                            <input type="number" id="questions-correct" min="0" max="200" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">è¨˜éŒ²ã‚’ä¿å­˜</button>
                </form>
            </div>

            <!-- çµ±è¨ˆ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-questions">0</div>
                    <div class="stat-label">ç·å•é¡Œæ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-correct">0</div>
                    <div class="stat-label">ç·æ­£ç­”æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="average-rate">0%</div>
                    <div class="stat-label">å¹³å‡æ­£ç­”ç‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-records">0</div>
                    <div class="stat-label">è¨˜éŒ²å›æ•°</div>
                </div>
            </div>

            <!-- ã‚°ãƒ©ãƒ• -->
            <div class="card">
                <h2>ğŸ“ˆ æ­£ç­”ç‡ã®æ¨ç§»</h2>
                <div class="chart-container">
                    <canvas id="progress-chart"></canvas>
                </div>
            </div>

            <!-- è¨˜éŒ²ä¸€è¦§ -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“‹ è¨˜éŒ²ä¸€è¦§</h2>
                    <button id="export-btn" class="btn btn-secondary btn-small">CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
                <div class="table-container">
                    <table id="records-table">
                        <thead>
                            <tr>
                                <th>æ—¥ä»˜</th>
                                <th>æ™‚åˆ»</th>
                                <th>åˆ†é‡</th>
                                <th>å•é¡Œæ•°</th>
                                <th>æ­£ç­”æ•°</th>
                                <th>æ­£ç­”ç‡</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="records-body">
                        </tbody>
                    </table>
                </div>
                <p id="no-records" class="no-records">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
            </div>
        </section>
    </div>

    <footer>
        <p>Â© 2026 å›½å®¶è©¦é¨“å¯¾ç­– å­¦ç¿’è¨˜éŒ²ã‚·ã‚¹ãƒ†ãƒ </p>
    </footer>

    <script src="app.js"></script>
</body>

</html>